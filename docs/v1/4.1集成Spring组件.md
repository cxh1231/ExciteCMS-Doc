?> æ¨èé¡¹ç›®ï¼š[Springç»„ä»¶é›†æˆå®æˆ˜](https://gitee.com/cxh1231/SpringBoot-Study)

## 1ã€ç»„ä»¶é›†æˆçš„å®ç°æ€è·¯

!> **ç»„ä»¶**ï¼šæœ¬ç« ä¸­çš„**ç»„ä»¶**ï¼ŒæŒ‡çš„æ˜¯éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹çš„åŠŸèƒ½ç»„ä»¶ï¼Œå…¶åŸºæœ¬æ“ä½œæ˜¯é€šè¿‡APIå‘èµ·è°ƒç”¨ï¼Œç„¶åå†å¤„ç†å“åº”æˆ–å¼‚å¸¸ã€‚<br>æ¯”å¦‚ï¼šæ”¯ä»˜å®æ”¯ä»˜ã€å‘é€çŸ­ä¿¡æœåŠ¡ã€ä¸ƒç‰›äº‘OSSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰æœåŠ¡ç­‰ã€‚

ä»»ä½•æ¶‰åŠåˆ°ç¬¬ä¸‰æ–¹çš„ç»„ä»¶ï¼Œå…¶æ“ä½œæ­¥éª¤æ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼š

1. **é…ç½®å‚æ•°**ï¼ˆæ¯”å¦‚é…ç½®æ”¯ä»˜å®æ”¯ä»˜çš„`APPID`ã€`ç§é’¥`ã€`è¯ä¹¦`ç­‰å…³é”®ä¿¡æ¯ï¼Œ[è¯¦æƒ…](https://github.com/alipay/alipay-easysdk/tree/master/java#%E6%99%AE%E9%80%9A%E8%B0%83%E7%94%A8) ï¼‰
2. **å‘èµ·APIè°ƒç”¨**ï¼ˆæ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜çš„ç”µè„‘ç½‘ç«™æ”¯ä»˜ï¼Œéœ€è¦é€šè¿‡æŒ‡å®š`API`ï¼Œä»¥`POST`æ–¹å¼ä¸‹å•ï¼Œ[è¯¦æƒ…](https://opendocs.alipay.com/open/028r8t?scene=22) )
3. **å¤„ç†å“åº”æˆ–å¼‚å¸¸**ï¼ˆæ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜çš„ç”µè„‘ç½‘ç«™æ”¯ä»˜ï¼Œä¸‹å•å®Œæˆåï¼Œè¯·æ±‚æˆåŠŸåˆ™è¿”å›`HTMLé¡µé¢`ï¼Œè¯·æ±‚å¤±è´¥åˆ™è¿”å›é”™è¯¯`JSONä¿¡æ¯`ï¼‰

**ç¬¬ä¸€æ­¥ï¼šé…ç½®å‚æ•°**

å¯¹äºä¸åŒçš„æœåŠ¡ï¼Œå…¶å‚æ•°ä¹Ÿä¸å°½ç›¸åŒï¼Œè€Œä¸”å‚æ•°çš„é…ç½®æ–¹æ³•ä¹Ÿæœ‰å¤šç§ã€‚

å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯å°†é…ç½®å‚æ•°å†™å…¥xmlæ–‡ä»¶æˆ–yamlæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚é›†æˆé‚®ä»¶å‘é€æœåŠ¡ï¼Œå¯ä»¥å°†é…ç½®ä¿¡æ¯å†™åœ¨application.ymlæ–‡ä»¶ä¸­ï¼š

```yaml
#email
spring:
  mail:
    host: smtp.163.com
    username: your_email@163.com
    password: your_password
    port: 465
```

?> è¿™ç§æ–¹æ³•è™½ç„¶å¸¸ç”¨ï¼Œä½†æ˜¯ï¼Œå¦‚æœé¡¹ç›®è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ›´æ¢å‘ä»¶é‚®ç®±ï¼Œåˆ™éœ€è¦åœæ­¢é¡¹ç›®ï¼Œä¿®æ”¹yamlï¼Œç¼–è¯‘ï¼Œå†éƒ¨ç½²...è¿‡ç¨‹å¤æ‚ï¼ˆå½“ç„¶å¯ä»¥ç”¨æ³¨å†Œä¸­å¿ƒè§£å†³æ­¤é—®é¢˜ï¼‰

å¦ä¸€ç§æ–¹æ³•ï¼Œåˆ™æ˜¯åŠ¨æ€çš„è®¾ç½®å‚æ•°ï¼Œå¯ä»¥å°†é…ç½®å‚æ•°å†™å…¥æ•°æ®åº“ä¸­ï¼Œè°ƒç”¨çš„æ—¶å€™ï¼Œä»æ•°æ®åº“ä¸­è¯»å–å‚æ•°ï¼Œç„¶åå†™è¿›ç›¸å…³çš„é…ç½®ç±»ã€‚ æ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜çš„å®˜æ–¹demoï¼š

![](https://img.zxdmy.com/2022/202201291826929.png)

æœ€ç»ˆï¼Œæœ¬é¡¹ç›®é‡‡ç”¨ç¬¬äºŒç§é…ç½®æ–¹æ³•ï¼š**å°†é…ç½®ä¿¡æ¯ä¿å­˜åœ¨æ•°æ®åº“ï¼Œå½“éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡çš„æ—¶å€™ï¼Œå†è¯»å–ä¿¡æ¯ï¼Œè£…è½½è‡³é…ç½®ç±»ä¸­**ã€‚

åœ¨**æ•°æ®åº“è®¾è®¡**ä¸­ï¼Œå¸¸ç”¨æ–¹æ³•æ˜¯å°†æŸä¸ªæœåŠ¡çš„é…ç½®å‚æ•°æŠ½å–ä¸ºå®ä½“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œå…¶ä¸­åªä¿å­˜ä¸€æ¡é…ç½®ä¿¡æ¯ã€‚æ¯”å¦‚æ”¯ä»˜å®æ”¯ä»˜æœåŠ¡ï¼Œåˆ›å»ºæ•°æ®åº“è¡¨ `alipay_config`ï¼Œå¹¶å†™å…¥å­—æ®µï¼š`appId`ã€`merchantPrivateKey`ã€......

æœ¬é¡¹ç›®ï¼Œåˆ™æ˜¯å°†æ‰€æœ‰æœåŠ¡çš„**é…ç½®ä¿¡æ¯**ï¼Œéƒ½å†™åœ¨ä¸€ä¸ª**æ•°æ®åº“è¡¨**ä¸­ï¼Œå…¶**æ•°æ®åº“è¡¨**çš„è®¾è®¡å¦‚ä¸‹ã€‚

**è¡¨å**ï¼šglobal_config

**å­—æ®µä¿¡æ¯**ï¼š

| å±æ€§åˆ—å            | å±æ€§è¯´æ˜           | æ•°æ®ç±»å‹        | å®ä¾‹å€¼                 | 
| -----------------  | --------------   | -------------- | ----------------------| 
| **id**             | **ä¸»é”®**          | int (11)       | 1,2,3...              |  
| **conf_service**   | **æœåŠ¡ç»„ä»¶åç§°**   | varchar (255)  | qiniuï¼Œaliyun ...     |   
| **conf_key**       | **è¯¥æœåŠ¡ä¸‹çš„key**  | varchar (255)  | qiniu01ã€aliyunSms01  | 
| **conf_value**     | **é…ç½®ä¿¡æ¯**       | text           | å¦‚æœåŠ å¯†å­˜å‚¨ï¼šåˆ™ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœä¸åŠ å¯†ï¼šåˆ™ä¸ºJSONæ•°æ®      | 
| **encrypt**        | **æ˜¯å¦åŠ å¯†**       | tinyint (2)    | 1-åŠ å¯†å­˜å‚¨ 0-ä¸åŠ å¯†     |
| create_time        | åˆ›å»ºæ—¶é—´           | datetime       | 2022-01-10 19:58:42   |
| update_time        | æ›´æ–°æ—¶é—´           | datetime       | 2022-01-11 19:58:42   |

?> ä¸ºä»€ä¹ˆè¦è®¾ç½®æœåŠ¡çš„key `conf_key` ï¼Ÿå› ä¸ºæœ¬é¡¹ç›®æ”¯æŒåŒä¸€ä¸ªæœåŠ¡ç»„ä»¶å¤šç§é…ç½®ã€‚æ¯”å¦‚å¯ä»¥é…ç½®å¤šä¸ªä¸ƒç‰›äº‘çš„å­˜å‚¨ç©ºé—´ï¼Œä¸åŒç©ºé—´åˆ™ä»¥keyä½œä¸ºåŒºåˆ†ã€‚

æœ€åé€šè¿‡**å…¬å…±æ¨¡å—**`excite-common` ä¸‹çš„**æœåŠ¡ç±»**`IGlobalConfigService.java`ï¼Œå¯¹æ•°æ®åº“è¡¨`global_config`ä¸­çš„è®°å½•è¿›è¡Œæ“ä½œã€‚

**ç¬¬äºŒã€ä¸‰æ­¥ï¼šå‘èµ·APIè°ƒç”¨ï¼Œå¹¶å¤„ç†å“åº”æˆ–å¼‚å¸¸**

å°†æŸ**ç¬¬ä¸‰æ–¹æœåŠ¡ç»„ä»¶**çš„é…ç½®ä¿¡æ¯ï¼ŒæŠ½å–ä¸ºå®ä½“å¯¹è±¡ï¼Œæ”¾åœ¨**ç»„ä»¶æ¨¡å—**`component`ä¸‹çš„`bo`åŒ…ä¸­ã€‚

ç„¶åä»¥å…·ä½“çš„**ç¬¬ä¸‰æ–¹æœåŠ¡ç»„ä»¶å**ä¸º**åŒ…å**ï¼Œæ–°å»ºå¯¹åº”çš„**æœåŠ¡ç±»**ï¼Œå°†è¯¥æœåŠ¡çš„ä¿å­˜é…ç½®ã€è¯»å–é…ç½®ã€è¯»å–å…¨éƒ¨é…ç½®æ–¹æ³•ï¼Œä»¥åŠç¬¬ä¸‰æ–¹æœåŠ¡ç‹¬æœ‰çš„åŠŸèƒ½å®ç°ï¼Œå†™åœ¨æ­¤ç±»ä¸­ã€‚

æœåŠ¡ç±»ä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µåšå„ç§å¼‚å¸¸å¤„ç†ã€‚

!> è¯¦æƒ…å¯å‚è€ƒå·²é›†æˆçš„ç»„ä»¶åˆ—è¡¨

## 2ã€æœ¬é¡¹ç›®å·²é›†æˆç»„ä»¶åˆ—è¡¨

| ğŸš© | æ¨¡å—å                      | é›†æˆç»„ä»¶ç®€ä»‹                                                       |
|-----|--------------------------- |-----------------------------------------------------------------|
| âœ… | **alipay**        | æ”¯ä»˜å®æ”¯ä»˜ç»„ä»¶ã€‚ä¸»è¦å®ç°æ”¯ä»˜å®çš„å½“é¢ä»˜ã€ç”µè„‘æ”¯ä»˜ã€ç½‘ç«™æ”¯ä»˜ç­‰å¸¸ç”¨æ”¯ä»˜æœåŠ¡ã€‚     |
| âœ… | **aliyunOss**     | é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚ä¸»è¦å®ç°é˜¿é‡Œäº‘OSSçš„æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½ã€‚ |
| âœ… | **aliyunSms**     | é˜¿é‡Œäº‘çŸ­ä¿¡å‘é€æœåŠ¡ã€‚ |
| âœ…  | **justauth**      | ç»Ÿä¸€çš„ç¬¬ä¸‰æ–¹ç™»å½•æœåŠ¡ã€‚ |
| âœ… | **qiniuyunOss**   | ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚ä¸»è¦å®ç°ä¸ƒç‰›äº‘OSSçš„æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½ã€‚ |
| âœ…  | **wechatPay**     | å¾®ä¿¡æ”¯ä»˜ç»„ä»¶ã€‚ä¸»è¦å®ç°å¾®ä¿¡çš„JSAPIæ”¯ä»˜ã€Nativeæ”¯ä»˜ç­‰å¸¸ç”¨æ”¯ä»˜æœåŠ¡ã€‚ |

å…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://img.zxdmy.com/2022/202201292040327.png)

## 3ã€æ–°é›†æˆç»„ä»¶çš„å®Œæ•´æ­¥éª¤

?> â‘  **ç»„ä»¶æ¨¡å—**ä¸­çš„`pom.xml`ï¼Œæ·»åŠ å¯¹åº”çš„ç»„ä»¶ä¾èµ–ã€‚

æ¯”å¦‚é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ï¼Œæ·»åŠ ä¾èµ–ä¸ºï¼š

```xml
<!-- é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ä¾èµ– -->
<dependency>
    <groupId>com.aliyun</groupId>
    <artifactId>dysmsapi20170525</artifactId>
    <version>2.0.8</version>
</dependency>
```

?> â‘¡ æ ¹æ®æœåŠ¡çš„é…ç½®è¦æ±‚ï¼Œæå–**é…ç½®ä¿¡æ¯**å®ä½“ï¼Œå¹¶å°†å…¶æ·»åŠ è‡³`bo`åŒ…ä¸­ã€‚

æ¯”å¦‚é˜¿é‡Œäº‘çŸ­ä¿¡çš„é…ç½®ä¿¡æ¯ä¸»è¦æœ‰å¼€å‘è€…AccessKey IDã€å¼€å‘è€…AccessKey Secretã€çŸ­ä¿¡ç­¾åã€æ¨¡æ¿ã€æ¨¡æ¿å‚æ•°ï¼Œåˆ™å¯ä»¥æŠ½å–ä¸ºå®ä½“å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š

```java
package com.zxdmy.excite.component.bo;

import lombok.Data;
import lombok.experimental.Accessors;

import java.io.Serializable;

/**
 * é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡é…ç½®ä¿¡æ¯
 *
 * @author æ‹¾å¹´ä¹‹ç’
 * @since 2022/1/3 20:28
 */
@Data
@Accessors(chain = true)
public class AliyunSmsBO implements Serializable {

    private static final long serialVersionUID = 1L;

    /**
     * æœ¬æ¡çŸ­ä¿¡é…ç½®ä¿¡æ¯çš„key
     */
    private String key;

    /**
     * å¿…å¡«ã€‚å¼€å‘è€…çš„ AccessKey ID
     */
    private String accessKeyId;

    /**
     * å¿…å¡«ã€‚å¼€å‘è€…çš„ AccessKey Secret
     */
    private String accessKeySecret;

    /**
     * å¿…å¡«ã€‚çŸ­ä¿¡æ¨¡æ¿çš„ç­¾åï¼Œä¸¥æ ¼æŒ‰ç…§"ç­¾ååç§°"å¡«å†™ï¼Œæ ¼å¼å¦‚ï¼šé˜¿é‡Œäº‘
     */
    private String signName;

    /**
     * å¿…å¡«ã€‚æ¨¡æ¿CODEï¼Œåº”ä¸¥æ ¼æŒ‰"æ¨¡æ¿CODE"å¡«å†™ï¼Œæ ¼å¼ï¼šSMS_88888888
     */
    private String templateCode;

    /**
     * é€‰å¡«ã€‚å¦‚æœæ¶ˆæ¯æ¨¡æ¿ä¸­æœ‰å‚æ•°ï¼Œåˆ™å¿…å¡«ã€‚è®¾ç½®æ¨¡æ¿å‚æ•°ï¼Œå¦‚ï¼š[code,data]
     */
    private String[] templateParam;
}
```

?> â‘¢ ä»¥ç»„ä»¶æœåŠ¡åç§°ï¼ˆæˆ–è€…æœåŠ¡å•†çš„åç§°ï¼‰ï¼Œæ–°å»º**åŒ…**å’Œ**æœåŠ¡ç±»**ï¼Œå¹¶å°†å¯¹åº”çš„ç»„ä»¶å®ç°å†™åœ¨æ­¤**æœåŠ¡ç±»**ä¸­ã€‚

æ¯”å¦‚é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ï¼Œåˆ™å¯ä»¥æ–°å»ºä¸€ä¸ªåä¸º`aliyun`çš„åŒ…ï¼Œå¹¶æ–°å»ºä¸€ä¸ªåä¸º`AliyunSmsService.java`çš„æœåŠ¡ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://img.zxdmy.com/2022/202201292121205.png)

ç„¶ååœ¨è¯¥æœåŠ¡ç±»ä¸­å®ç°å„ç§æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```java
package com.zxdmy.excite.component.aliyun;

import com.aliyun.dysmsapi20170525.Client;
// å…¶ä»–åŒ…çœç•¥

import java.util.HashMap;
import java.util.Map;

/**
 * é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ï¼ˆShort Message Serviceï¼‰å®ç°
 *
 * @author æ‹¾å¹´ä¹‹ç’
 * @since 2022-01-02 0002 23:33
 */
@Service
@AllArgsConstructor
public class AliyunSmsService {

    IGlobalConfigService configService;

    // æœåŠ¡å
    private static final String DEFAULT_SERVICE = "aliyunSms";

    /**
     * ä¿å­˜é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡çš„å¼€å‘è€…ä¿¡æ¯ã€æ¶ˆæ¯æ¨¡æ¿ç›¸å…³ä¿¡æ¯
     * æ³¨æ„ï¼šåŒä¸€ä¸ªç³»ç»Ÿçš„æ¶ˆæ¯æ¨¡æ¿å¯èƒ½æœ‰å¤šä¸ªï¼Œæ‰€ä»¥
     *
     * @param aliyunSmsBO å®ä½“ä¿¡æ¯ï¼Œå…¶ä¸­KEYå¿…å¡«
     * @return ä¿å­˜ç»“æœ
     * @throws JsonProcessingException å¼‚å¸¸
     */
    public boolean saveAliyunSmsConfig(AliyunSmsBO aliyunSmsBO) throws JsonProcessingException {
        // å¦‚æœå¿…å¡«é¡¹ä¸ºç©ºï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯
        if (null == aliyunSmsBO.getKey() || null == aliyunSmsBO.getAccessKeyId() || null == aliyunSmsBO.getAccessKeySecret() || null == aliyunSmsBO.getSignName() || null == aliyunSmsBO.getTemplateCode()) {
            throw new ServiceException("éƒ¨åˆ†å¿…å¡«ä¿¡æ¯ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ï¼");
        }
        // ä¿å­˜
        return configService.save(DEFAULT_SERVICE, aliyunSmsBO.getKey(), aliyunSmsBO, true);
    }

    /**
     * é€šè¿‡é…ç½®KEYè·å–çŸ­ä¿¡é…ç½®ä¿¡æ¯
     *
     * @param confKey é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡çš„é…ç½®key
     * @return é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡å®ä½“
     */
    public AliyunSmsBO getAliyunSmsConfig(String confKey) {
        AliyunSmsBO aliyunSmsBO = new AliyunSmsBO();
        return (AliyunSmsBO) configService.get(DEFAULT_SERVICE, confKey, aliyunSmsBO);
    }

    /**
     * å‘é€çŸ­ä¿¡æœåŠ¡
     *
     * @param confKey       confKeyï¼Œå½“å‰çŸ­ä¿¡æ¨¡æ¿é…ç½®çš„key
     * @param phone         æ‰‹æœºå·æ•°ç»„
     * @param templateValue æ¶ˆæ¯æ¨¡æ¿ä¸­çš„å‚æ•°å€¼
     * @return ç»“æœ
     */
    public boolean sendSmsOne(String confKey, String phone, String[] templateValue) {
        // ä»æ•°æ®åº“è¯»å–é…ç½®ä¿¡æ¯
        AliyunSmsBO aliyunSmsBO = this.getAliyunSmsConfig(confKey);
        if (null == aliyunSmsBO) {
            throw new ServiceException("é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡é…ç½®ä¿¡æ¯æœ‰è¯¯/ä¸å­˜åœ¨ï¼Œè¯·æ ¸å®");
        }
        // å¦‚æœè¾“å…¥çš„å‚æ•°ä¸ªæ•°å’Œé…ç½®ä¿¡æ¯é‡Œçš„å‚æ•°ä¸ªæ•°ä¸ç›¸ç­‰ï¼Œåˆ™è¿”å›é”™è¯¯ä¿¡æ¯
        if (templateValue.length != aliyunSmsBO.getTemplateParam().length) {
            throw new ServiceException("templateValueä¸ªæ•°æœ‰è¯¯ï¼Œè¯·æ ¸å®");
        }
        // å‘èµ·çŸ­ä¿¡å¹¶è·å–å‘é€ç»“æœ
        SendSmsResponse response = this.sendSms(aliyunSmsBO, phone, templateValue, null);
        // ç»“æœä¸ä¸ºç©ºï¼Œè¿›ä¸€æ­¥åˆ¤æ–­
        if (response != null) {
            return "OK".equals(response.body.code);
        }
        return false;
    }

    /**
     * æ‰¹é‡å‘é€çŸ­ä¿¡
     * å…¶ä¸­å®˜ç½‘ä¸­æœ‰æ‰¹é‡å‘é€çŸ­ä¿¡çš„æ¥å£SendBatchSmsã€‚
     * ä½†æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯é€æ¡å‘é€
     *
     * @param confKey çŸ­ä¿¡æ¨¡æ¿çš„key
     * @param smsMap  çŸ­ä¿¡mapï¼Œå…¶ä¸­keyä¸ºæ‰‹æœºå·ï¼Œvalueä¸ºString[]æ•°ç»„ï¼Œå…¶å¤§å°ä¸æ¶ˆæ¯æ¨¡æ¿å‚æ•°ä¸ªæ•°ä¸€è‡´ï¼Œå¹¶ä¾æ¬¡å¯¹åº”
     * @return ç»“æœmap
     */
    public Map<String, Boolean> sendSmsBatch(String confKey, Map<String, String[]> smsMap) {
        // çœç•¥
    }

    /**
     * ç§æœ‰æ–¹æ³•ï¼šé…ç½®å¹¶å‘é€çŸ­ä¿¡å®ç°ç±»
     *
     * @param aliyunSmsBO   é…ç½®ä¿¡æ¯
     * @param phone         æ¥æ”¶æ‰‹æœºå·
     * @param templateValue æ¨¡æ¿JSONæ ¼å¼çš„å‚æ•°
     * @param outId         æµæ°´å·
     * @return å‘é€ç»“æœ
     */
    private SendSmsResponse sendSms(AliyunSmsBO aliyunSmsBO, String phone, String[] templateValue, String outId) {
        // é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ä¿¡æ¯é…ç½®
        Config config = new Config()
                // å¿…å¡«ï¼Œå¼€å‘è€…çš„ AccessKey ID
                .setAccessKeyId(aliyunSmsBO.getAccessKeyId())
                // å¿…å¡«ï¼Œå¼€å‘è€…çš„ AccessKey Secret
                .setAccessKeySecret(aliyunSmsBO.getAccessKeySecret())
                // é»˜è®¤ï¼Œæš‚æ—¶ä¸æ”¯æŒå¤šRegionï¼Œé»˜è®¤å³å¯
                .setRegionId("cn-hangzhou")
                // é»˜è®¤ï¼Œäº§å“åŸŸåï¼Œå¼€å‘è€…æ— éœ€æ›¿æ¢
                .setEndpoint("dysmsapi.aliyuncs.com")
                // å¯é€‰ï¼Œå¯ç”¨httpsåè®®
                .setProtocol("https");
        // æ„é€ è¯·æ±‚å‚æ•°
        StringBuilder templateParam = new StringBuilder("{");
        for (int i = 0; i < aliyunSmsBO.getTemplateParam().length; i++) {
            templateParam.append("\"").append(aliyunSmsBO.getTemplateParam()[i]).append("\":\"").append(templateValue[i]).append("\",");
        }
        templateParam.append("}");
        // çŸ­ä¿¡è¯·æ±‚ä¿¡æ¯é…ç½®
        SendSmsRequest sendSmsRequest = new SendSmsRequest()
                // å¿…å¡«ï¼Œæ¥æ”¶çŸ­ä¿¡çš„æ‰‹æœºå·
                .setPhoneNumbers(phone)
                // å¿…å¡«ï¼Œè®¾ç½®ç­¾ååç§°ï¼Œåº”ä¸¥æ ¼æŒ‰"ç­¾ååç§°"å¡«å†™ï¼Œæ ¼å¼å¦‚ï¼šé˜¿é‡Œäº‘
                .setSignName(aliyunSmsBO.getSignName())
                // å¿…å¡«ï¼Œè®¾ç½®æ¨¡æ¿CODEï¼Œåº”ä¸¥æ ¼æŒ‰"æ¨¡æ¿CODE"å¡«å†™ï¼Œæ ¼å¼ï¼šSMS_88888888
                .setTemplateCode(aliyunSmsBO.getTemplateCode())
                // å¯é€‰ï¼Œè®¾ç½®æ¨¡æ¿å‚æ•°, å‡å¦‚æ¨¡æ¿ä¸­å­˜åœ¨å˜é‡éœ€è¦æ›¿æ¢åˆ™ä¸ºå¿…å¡«é¡¹
                .setTemplateParam(templateParam.toString());
        // å‘èµ·è¯·æ±‚
        SendSmsResponse response;
        try {
            response = new Client(config).sendSms(sendSmsRequest);
        } catch (Exception e) {
            System.out.println(e.getMessage());
            return null;
        }
        return response;
    }
}
```

?> â‘£ **æ§åˆ¶ç±»**ä¸­è°ƒç”¨**æœåŠ¡ç±»**çš„æ–¹æ³•ã€‚

æ¯”å¦‚é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ï¼Œä¸Šé¢å·²ç»å®ç°äº†ç›¸å…³çš„å‘é€çŸ­ä¿¡çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ§åˆ¶ç±»ä¸­ï¼Œç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå®ç°çŸ­ä¿¡å‘é€åŠŸèƒ½ã€‚

```java
package com.zxdmy.excite.admin.controller.component;

// å¯¼åŒ…çœç•¥

/**
 * é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡æ§åˆ¶ç±»
 *
 * @author æ‹¾å¹´ä¹‹ç’
 * @since 2022/1/24 21:49
 */
@Controller
@AllArgsConstructor
@RequestMapping("/component/aliyunSms")
public class AliyunSmsController extends BaseController {

    AliyunSmsService aliyunSmsService;

    /**
     * å‘é€çŸ­ä¿¡éªŒè¯ç 
     *
     * @param phone æ‰‹æœºå·
     * @return å‘é€ç»“æœ
     */
    @PostMapping(value = "/send")
    @ResponseBody
    public BaseResult sendMessage(String phone) {
        if (aliyunSmsService.sendSmsOne("aliyunSms01", phone, new String[]{"2689"})) {
            return success("çŸ­ä¿¡éªŒè¯ç å‘é€æˆåŠŸï¼");
        }
        return error("çŸ­ä¿¡éªŒè¯ç å‘é€å¤±è´¥ï¼");
    }
}
```

!> å…¶ä»–ç»„ä»¶çš„å…·ä½“å®ç°é€»è¾‘ï¼Œå¯å‚è€ƒå·²é›†æˆçš„ç»„ä»¶ã€‚